# 資源設定與資料庫建立
>設定初始string、color、style資源
>
>進行資料庫設計
>
>建立SQLite資料庫

### colors.xml 加入
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
        <color name="colorPrimary">#3F51B5</color>
        <color name="colorPrimaryDark">#303F9F</color>
        <color name="colorPrimaryDark_2">#C581C5</color> <!--登入後的Toolbar顏色-->
        <color name="colorAccent">#FF4081</color>
    </resources>

### strings.xml 加入
    <resources>
        <string name="app_name">行動支付模擬器</string>
    </resources>

### 資料庫設計
<img src="https://github.com/ntub46010/MobilePaySimulator/blob/master/%E8%B3%87%E6%96%99%E5%BA%AB%E9%97%9C%E8%81%AF%E5%9C%96.png" height="348px" width="552px" />

### MyDBHelper.java 加入
    public class MyDBHelper extends SQLiteOpenHelper {

        public MyDBHelper(Context context) {
            super(context, "MobilePay", null, 1);
        }

        //自動產生編號
        
        //用帳號取得會員編號
        
        //用會員編號取得姓名
        
        //用會員編號取得帳號
        
        //取得總收入
        
        //取得總支出
        
        //取得帳號餘額
        
        //取得投資金額
        
        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("create table 會員資料(" +
                    "會員編號 TEXT PRIMARY KEY, " +
                    "帳號 TEXT NOT NULL, " +
                    "登入密碼 TEXT NOT NULL, " +
                    "安全密碼 TEXT NOT NULL, " +
                    "姓名 TEXT NOT NULL, " +
                    "性別 TEXT NOT NULL, " +
                    "生日 TEXT NOT NULL, " +
                    "電子郵件 TEXT NOT NULL, " +
                    "註冊日期 TEXT NOT NULL" +
                    ");"
            );

            db.execSQL("create table 金流紀錄(" +
                    "交易編號 TEXT PRIMARY KEY, " +
                    "匯款方 TEXT NOT NULL, " +
                    "收款方 TEXT NOT NULL, " +
                    "日期 TEXT NOT NULL, " +
                    "時間 TEXT NOT NULL, " +
                    "摘要 TEXT NOT NULL, " +
                    "金額 INTEGER NOT NULL, " +
                    "留言 TEXT, " +
                    "FOREIGN KEY(匯款方) REFERENCES 會員資料(會員編號), " +
                    "FOREIGN KEY(收款方) REFERENCES 會員資料(會員編號)" +
                    ");"
            );

            db.execSQL("create table 投資報酬(" +
                    "日期 TEXT PRIMARY KEY, " +
                    "單位收益 REAL NOT NULL" +
                    ");"
            );

            db.execSQL("create table 會員投資歷史(" +
                    "會員編號 TEXT, " +
                    "日期 TEXT, " +
                    "當日投資金額 REAL NOT NULL, " +
                    "收益加成 REAL NOT NULL, " +
                    "實際收益 REAL NOT NULL, " +
                    "FOREIGN KEY(會員編號) REFERENCES 會員資料(會員編號), " +
                    "FOREIGN KEY(日期) REFERENCES 投資報酬(日期)" +
                    ");"
            );

            db.execSQL("create table 會員投資狀況(" +
                    "會員編號 TEXT PRIMARY KEY, " +
                    "投資金額 REAL NOT NULL, " +
                    "待確認總金額 INTEGER NOT NULL, " +
                    "收益加成 REAL NOT NULL, " +
                    "FOREIGN KEY(會員編號) REFERENCES 會員資料(會員編號)" +
                    ");"
            );

            db.execSQL("create table 投資待確認金額(" +
                    "會員編號 TEXT NOT NULL, " +
                    "金額 INTEGER NOT NULL, " +
                    "確認完成日 TEXT NOT NULL, " +
                    "旗標 INTEGER NOT NULL, " +
                    "FOREIGN KEY(會員編號) REFERENCES 會員資料(會員編號)" +
                    ");"
            );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("drop table if exists 投資待確認金額");
            db.execSQL("drop table if exists 會員投資歷史");
            db.execSQL("drop table if exists 會員投資狀況");
            db.execSQL("drop table if exists 投資報酬");
            db.execSQL("drop table if exists 金流紀錄");
            db.execSQL("drop table if exists 會員資料");
            onCreate(db);
        }
    }
